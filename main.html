<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Editor</title>
        <script>
            function add()
            {
                var div_element = document.createElement('div');
                var body = document.getElementsByTagName('body');
                console.log(body);
                body[0].appendChild(div_element);
                console.log("add");
            }
        </script>
    </head>
    <body style="margin:0;padding:0;" onload="add();">
        <div id="main_"></div>
        <webview id="webview" src="editor.html" preload="js\contents.js"  style="width:100vw; height:100vh;"></webview>
        <button class="js-button" id="pdf">PDF</button>
        <script>
            const fs = require('fs');
            console.log("output");
            var webview = document.querySelector('webview');
            //webview.send("getHtml");
            
            var btn = document.getElementById('pdf');
            btn.addEventListener("click", function(){
                console.log("send message");
                console.log(require('electron').ipcRenderer.send('asynchronous-message', "message"));
                require('electron').ipcRenderer.on('asynchronous-reply-to-main', (event, arg) => { console.log(arg);});
                // webview.printToPDF({}, (error, data) => {
                //     fs.writeFile("test.pdf", data, (error) =>{
                //         console.log("DONE");
                //     });
                // });
            });

            webview.addEventListener('dom-ready', () =>{
                webview.openDevTools();
            });

        </script> 

    </body>
</html>
